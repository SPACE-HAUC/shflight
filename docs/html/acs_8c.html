<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SPACE HAUC Flight Software: src/acs.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SPACE HAUC Flight Software
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">acs.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Attitude Control System related functions.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="main_8h_source.html">main.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="shflight__externs_8h_source.html">shflight_externs.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="shflight__consts_8h_source.html">shflight_consts.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="acs_8h_source.html">acs.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for acs.c:</div>
<div class="dyncontent">
<div class="center"><img src="acs_8c__incl.png" border="0" usemap="#src_2acs_8c" alt=""/></div>
<map name="src_2acs_8c" id="src_2acs_8c">
<area shape="rect" id="node2" href="main_8h.html" title="Includes all headers necessary for the core flight software, including ACS, and defines ACS states (w..." alt="" coords="727,80,788,107"/>
<area shape="rect" id="node19" href="shflight__consts_8h.html" title="Describes all constants defined by the preprocessor for the code. " alt="" coords="97,379,218,405"/>
<area shape="rect" id="node31" href="acs_8h.html" title="Header file including headers and function prototypes of the Attitude Control System. " alt="" coords="103,155,158,181"/>
<area shape="rect" id="node32" href="shflight__externs_8h.html" title="Extern declaration of the shflight global variables for all threads. " alt="" coords="107,229,232,256"/>
<area shape="rect" id="node12" href="main__helper_8h.html" title="Defines vector macros and other helper functions for the flight software. " alt="" coords="382,379,485,405"/>
<area shape="rect" id="node18" href="bessel_8h.html" title="Bessel filter implementation for Attitude Control System. " alt="" coords="234,155,305,181"/>
<area shape="rect" id="node20" href="ncv7708_8h.html" title="Function prototypes and data structure for NCV77X8 SPI Driver (Linux) " alt="" coords="923,379,1005,405"/>
<area shape="rect" id="node25" href="lsm9ds1_8h.html" title="Function prototypes and data structures for LSM9DS1 Magnetometer I2C driver. " alt="" coords="1448,379,1531,405"/>
<area shape="rect" id="node28" href="tsl2561_8h.html" title="TSL2561 I2C driver function and struct declarations. " alt="" coords="1080,379,1155,405"/>
<area shape="rect" id="node29" href="ads1115_8h.html" title="ADS1115 I2C Driver function prototypes and data structures. " alt="" coords="1179,379,1261,405"/>
<area shape="rect" id="node30" href="tca9458a_8h.html" title="Function prototypes and struct declarations for TCA9458A I2C driver. " alt="" coords="1337,379,1423,405"/>
<area shape="rect" id="node33" href="datavis_8h.html" title="DataVis thread to visualize ACS data over TCP (uses client.py) " alt="" coords="245,304,320,331"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ae71449b1cc6e6250b91f539153a7a0d3"><td class="memItemLeft" align="right" valign="top"><a id="ae71449b1cc6e6250b91f539153a7a0d3"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>M_PI</b>&#160;&#160;&#160;3.1415</td></tr>
<tr class="separator:ae71449b1cc6e6250b91f539153a7a0d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:afe5a7f6a8bb976dea15c4232a8a3bf7c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="acs_8c.html#afe5a7f6a8bb976dea15c4232a8a3bf7c">detumbleAction</a> ()</td></tr>
<tr class="memdesc:afe5a7f6a8bb976dea15c4232a8a3bf7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function executes the detumble algorithm.  <a href="#afe5a7f6a8bb976dea15c4232a8a3bf7c">More...</a><br /></td></tr>
<tr class="separator:afe5a7f6a8bb976dea15c4232a8a3bf7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad566a16cc4718db2760d3b234e679a0f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="acs_8c.html#ad566a16cc4718db2760d3b234e679a0f">sunpointAction</a> ()</td></tr>
<tr class="memdesc:ad566a16cc4718db2760d3b234e679a0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function executes the sunpointing algorithm.  <a href="#ad566a16cc4718db2760d3b234e679a0f">More...</a><br /></td></tr>
<tr class="separator:ad566a16cc4718db2760d3b234e679a0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6539356d266d0e63bb927ebd6553e594"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="acs_8c.html#a6539356d266d0e63bb927ebd6553e594">hbridge_enable</a> (int x, int y, int z)</td></tr>
<tr class="memdesc:a6539356d266d0e63bb927ebd6553e594"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fire magnetorquer in X, Y, and Z directions using the input integers.  <a href="#a6539356d266d0e63bb927ebd6553e594">More...</a><br /></td></tr>
<tr class="separator:a6539356d266d0e63bb927ebd6553e594"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3c0645a744d26182deffe1c920afda3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="acs_8c.html#af3c0645a744d26182deffe1c920afda3">HBRIDGE_DISABLE</a> (int num)</td></tr>
<tr class="memdesc:af3c0645a744d26182deffe1c920afda3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disables magnetorquer in the axis indicated by the input.  <a href="#af3c0645a744d26182deffe1c920afda3">More...</a><br /></td></tr>
<tr class="separator:af3c0645a744d26182deffe1c920afda3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8fc5b169879688e9a0fa05625a85460"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="acs_8c.html#af8fc5b169879688e9a0fa05625a85460">getOmega</a> (void)</td></tr>
<tr class="memdesc:af8fc5b169879688e9a0fa05625a85460"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates <img class="formulaInl" alt="$\omega$" src="form_0.png"/> using <img class="formulaInl" alt="$\dot{\vec{B}}$" src="form_1.png"/> and stores in the circular buffer.  <a href="#af8fc5b169879688e9a0fa05625a85460">More...</a><br /></td></tr>
<tr class="separator:af8fc5b169879688e9a0fa05625a85460"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ac65e144b7cc108205439032d3b5bfe"><td class="memItemLeft" align="right" valign="top"><a id="a7ac65e144b7cc108205439032d3b5bfe"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="acs_8c.html#a7ac65e144b7cc108205439032d3b5bfe">getSVec</a> (void)</td></tr>
<tr class="memdesc:a7ac65e144b7cc108205439032d3b5bfe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates sun vector using coarse sun sensor and fine sun sensor measurements. Favors the fine sun sensor measurements if exists. The value is inserted into a circular buffer. <br /></td></tr>
<tr class="separator:a7ac65e144b7cc108205439032d3b5bfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf981ac9e388749ee0ebb821ca4487d7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="acs_8c.html#adf981ac9e388749ee0ebb821ca4487d7">readSensors</a> (void)</td></tr>
<tr class="memdesc:adf981ac9e388749ee0ebb821ca4487d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads hardware sensors and puts the values in the global storage, upon which calls the <a class="el" href="acs_8h.html#af8fc5b169879688e9a0fa05625a85460" title="Calculates  using  and stores in the circular buffer. ">getOmega()</a> and <a class="el" href="acs_8h.html#a7ac65e144b7cc108205439032d3b5bfe" title="Calculates sun vector using coarse sun sensor and fine sun sensor measurements. Favors the fine sun s...">getSVec()</a> functions to calculate angular speed and sun vector.  <a href="#adf981ac9e388749ee0ebb821ca4487d7">More...</a><br /></td></tr>
<tr class="separator:adf981ac9e388749ee0ebb821ca4487d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a429c2d8c7ace4c67970a487076f274d7"><td class="memItemLeft" align="right" valign="top"><a id="a429c2d8c7ace4c67970a487076f274d7"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="acs_8c.html#a429c2d8c7ace4c67970a487076f274d7">checkTransition</a> (void)</td></tr>
<tr class="memdesc:a429c2d8c7ace4c67970a487076f274d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function checks if the ACS should transition from one state to the other at every iteration. The function executes only when the <img class="formulaInl" alt="$\vec{\omega}$" src="form_2.png"/> and sun vector buffers are full. <br /></td></tr>
<tr class="separator:a429c2d8c7ace4c67970a487076f274d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67a66070a4b2adef8c17b017b8b904cc"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="acs_8c.html#a67a66070a4b2adef8c17b017b8b904cc">acs_thread</a> (void *id)</td></tr>
<tr class="memdesc:a67a66070a4b2adef8c17b017b8b904cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attitude Control System Thread.  <a href="#a67a66070a4b2adef8c17b017b8b904cc">More...</a><br /></td></tr>
<tr class="separator:a67a66070a4b2adef8c17b017b8b904cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae81fb37787d89b955296e310dd3b71e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="acs_8c.html#aae81fb37787d89b955296e310dd3b71e">insertionSort</a> (int a1[], int a2[])</td></tr>
<tr class="memdesc:aae81fb37787d89b955296e310dd3b71e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sorts the first array and reorders the second array according to the first array.  <a href="#aae81fb37787d89b955296e310dd3b71e">More...</a><br /></td></tr>
<tr class="separator:aae81fb37787d89b955296e310dd3b71e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3b39c9563763b44cd2d3ff0777765a3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="acs_8c.html#af3b39c9563763b44cd2d3ff0777765a3">acs_init</a> (void)</td></tr>
<tr class="memdesc:af3b39c9563763b44cd2d3ff0777765a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the devices required to run the attitude control system.  <a href="#af3b39c9563763b44cd2d3ff0777765a3">More...</a><br /></td></tr>
<tr class="separator:af3b39c9563763b44cd2d3ff0777765a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a239753e2753eaabbf5b9b9b7191006e6"><td class="memItemLeft" align="right" valign="top"><a id="a239753e2753eaabbf5b9b9b7191006e6"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="acs_8c.html#a239753e2753eaabbf5b9b9b7191006e6">acs_destroy</a> (void)</td></tr>
<tr class="memdesc:a239753e2753eaabbf5b9b9b7191006e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Powers down ACS devices and closes relevant file descriptors. <br /></td></tr>
<tr class="separator:a239753e2753eaabbf5b9b9b7191006e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Attitude Control System related functions. </p>
<dl class="section author"><dt>Author</dt><dd>Sunip K. Mukherjee (<a href="#" onclick="location.href='mai'+'lto:'+'sun'+'ip'+'kmu'+'kh'+'erj'+'ee'+'@gm'+'ai'+'l.c'+'om'; return false;">sunip<span style="display: none;">.nosp@m.</span>kmuk<span style="display: none;">.nosp@m.</span>herje<span style="display: none;">.nosp@m.</span>e@gm<span style="display: none;">.nosp@m.</span>ail.c<span style="display: none;">.nosp@m.</span>om</a>) </dd></dl>
<dl class="section version"><dt>Version</dt><dd>0.1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2020-03-19</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2020 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="af3b39c9563763b44cd2d3ff0777765a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3b39c9563763b44cd2d3ff0777765a3">&#9670;&nbsp;</a></span>acs_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int acs_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the devices required to run the attitude control system. </p>
<p>This function initializes the target angular momentum using MOI defined in <a class="el" href="shflight__globals_8h.html" title="Allocates memory for the global variables used in the flight code for inter-thread communication...">shflight_globals.h</a> and the target angular speed set in <a class="el" href="main_8c.html" title="main() symbol of the SPACE-HAUC Flight Software. ">main.c</a>. Then this function initializes all the relevant devices for ACS to function.</p>
<dl class="section return"><dt>Returns</dt><dd>int 1 on success, error codes defined in SH_ERRORS on error. </dd></dl>

</div>
</div>
<a id="a67a66070a4b2adef8c17b017b8b904cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67a66070a4b2adef8c17b017b8b904cc">&#9670;&nbsp;</a></span>acs_thread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* acs_thread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attitude Control System Thread. </p>
<p>This thread executes the ACS functions in a loop controlled by the variable <code>done</code>, which is controlled by the interrupt handler.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>Thread ID passed as a pointer to an integer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NULL </dd></dl>

</div>
</div>
<a id="afe5a7f6a8bb976dea15c4232a8a3bf7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe5a7f6a8bb976dea15c4232a8a3bf7c">&#9670;&nbsp;</a></span>detumbleAction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void detumbleAction </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function executes the detumble algorithm. </p>
<p>The detumble algorithm calculates the direction and time for which the magnetorquers fire. The direction is determined by first calculating the vector <img class="formulaInl" alt="$\hat{B}\times\hat{L_0 - L}$" src="form_5.png"/>, which is a unit vector, and then checking which of the components have a magnitude greater than 0.01. A component with magnitude greater than 0.01 indicates that torquer can be fired, in the direction indicated by the sign of the component. Further, the torque that is generated by the firing decision is estimated for the current value of the magnetic field by calculating <img class="formulaInl" alt="$\vec{\tau}=\vec{mu}\times\vec{B}$" src="form_6.png"/>, where <img class="formulaInl" alt="$\vec{mu}$" src="form_7.png"/> is calculated by multiplying the firing direction vector with the dipole moment of the magnetorquers (0.21 A <img class="formulaInl" alt="$\cdot$" src="form_8.png"/>m <img class="formulaInl" alt="$^2$" src="form_9.png"/>). Then for each direction, the firing time is estimated by <img class="formulaInl" alt="$ t_i = \frac{\Delta L_i}{\tau_i}$" src="form_10.png"/>. The torquer in any direction is fired only if the firing time is greater than 5 ms, and any torquer is fired for at most the allowed firing time. At the end of the action, all torquers are turned off for the next magnetic field measurement. </p>

</div>
</div>
<a id="af8fc5b169879688e9a0fa05625a85460"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8fc5b169879688e9a0fa05625a85460">&#9670;&nbsp;</a></span>getOmega()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void getOmega </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates <img class="formulaInl" alt="$\omega$" src="form_0.png"/> using <img class="formulaInl" alt="$\dot{\vec{B}}$" src="form_1.png"/> and stores in the circular buffer. </p>
<p>Calculates current angular speed. Requires current and previous measurements of <img class="formulaInl" alt="$\dot{\vec{B}}$" src="form_1.png"/>. The calculated angular speed is put inside the global circular buffer. Sets W_full to indicate the buffer becoming full the first time. </p>

</div>
</div>
<a id="af3c0645a744d26182deffe1c920afda3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3c0645a744d26182deffe1c920afda3">&#9670;&nbsp;</a></span>HBRIDGE_DISABLE()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int HBRIDGE_DISABLE </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disables magnetorquer in the axis indicated by the input. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">num</td><td>Integer, 0 indicates X axis, 1 indicates Y axis, 2 indicates Z axis. In hardware, a number &gt; 2 causes all three torquers to shut down. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int Status of the operation, returns 1 on success. </dd></dl>

</div>
</div>
<a id="a6539356d266d0e63bb927ebd6553e594"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6539356d266d0e63bb927ebd6553e594">&#9670;&nbsp;</a></span>hbridge_enable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int hbridge_enable </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>z</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fire magnetorquer in X, Y, and Z directions using the input integers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>Fires in the +X or -X direction depending on the input being +1 or -1, and does nothing if x = 0 </td></tr>
    <tr><td class="paramname">y</td><td>Fires in the +Y or -Y direction depending on the input being +1 or -1, and does nothing if y = 0 </td></tr>
    <tr><td class="paramname">z</td><td>Fires in the +Z or -Z direction depending on the input being +1 or -1, and does nothing if z = 0 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int Status of the operation, returns 1 on success. </dd></dl>

</div>
</div>
<a id="aae81fb37787d89b955296e310dd3b71e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae81fb37787d89b955296e310dd3b71e">&#9670;&nbsp;</a></span>insertionSort()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void insertionSort </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>a1</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>a2</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sorts the first array and reorders the second array according to the first array. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">a1</td><td>Pointer to integer array to sort. </td></tr>
    <tr><td class="paramname">a2</td><td>Pointer to integer array to reorder. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adf981ac9e388749ee0ebb821ca4487d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf981ac9e388749ee0ebb821ca4487d7">&#9670;&nbsp;</a></span>readSensors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int readSensors </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads hardware sensors and puts the values in the global storage, upon which calls the <a class="el" href="acs_8h.html#af8fc5b169879688e9a0fa05625a85460" title="Calculates  using  and stores in the circular buffer. ">getOmega()</a> and <a class="el" href="acs_8h.html#a7ac65e144b7cc108205439032d3b5bfe" title="Calculates sun vector using coarse sun sensor and fine sun sensor measurements. Favors the fine sun s...">getSVec()</a> functions to calculate angular speed and sun vector. </p>
<dl class="section return"><dt>Returns</dt><dd>int Returns 1 for success, and -1 for error. </dd></dl>

</div>
</div>
<a id="ad566a16cc4718db2760d3b234e679a0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad566a16cc4718db2760d3b234e679a0f">&#9670;&nbsp;</a></span>sunpointAction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void sunpointAction </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function executes the sunpointing algorithm. </p>
<p>The sunpointing algoritm calculates the duty cycle of the Z-magnetorquer firing. The duty cycle is determined by calculating the vector <img class="formulaInl" alt="$(\hat{S}(\hat{S}\cdot\hat{B}))\times((\hat{L}(\hat{L}\cdot\hat{B}))$" src="form_11.png"/>. The Z component of this vector upon normalization specifies the duty cycle. However, due to lowering of efficiency as the spacecraft aligns with the sun, the gain is increased. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
